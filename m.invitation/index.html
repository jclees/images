<!DOCTYPE html>
<html lang="en">

<head>
    <title></title>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="initial-scale=1,maximum-scale=1, minimum-scale=1">
    <link rel="stylesheet" type="text/css" href="css/reset.css" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <link rel="stylesheet" type="text/css" href="css/animate.min.css" />
    <link rel="stylesheet" type="text/css" href="js/swiper/css/swiper.min.css" />
    <style>
        .swiper-container {
            position: absolute;
            top: 10vw;
            height: 48vw;
            width: 60%;
            left: 50%;
            transform: translate(-50%, 0);
        }


        .swiper-pagination-bullet {
            background: #90aecb;
            opacity: 1;
        }

        .swiper-pagination-bullet-active {
            background: #fff;
            opacity: 1;
        }

        .sw_txt {
            position: absolute;
            top: 57vw;
            width: 100%;
            text-align: center;
            color: #fff;
            font-size: 12px;
            line-height: 6vw;
            letter-spacing: 4px;
            text-shadow: 0px 0px 10px #2f8990, 0px 0px 10px #2f8990, 0px 0px 10px #2f8990, 0px 0px 10px #2f8990;
        }

        .sw_txt_intro {
            top: 80vw;
            font-size: 20px;
        }
    </style>
</head>

<body>
    <div class="main">
        <div class="page page1 " style="display: block">
            <div class="page1_main">
                <div class="loading_box">
                    <img src="images/loading.png" alt="" class="auto_img img">
                    <p class="txt"></p>
                </div>
                <p class="tips">loading...</p>
            </div>
        </div>
        <div class="page page2">
            <div class="page2_main">
                <div class="txt_box">
                    <p class="animated fadeInDown">从没想过改变世界</p>
                    <p class="animated fadeInDown">从没想过改变世界</p>
                    <p>从没想过改</p>
                </div>
                <div class="txt_box txt_box_2">
                    <p>从没想过改变世界</p>
                    <p>从没想过改变世界</p>
                    <p>从没想过改</p>
                </div>
                <div class="txt_box txt_box_3">
                    <p>从没想过改变世界</p>
                    <p>从没想过改变世界</p>
                </div>
                <div class="txt_box txt_box_4">
                    <p>从没想过改变世界</p>
                    <p>从没想过改变世界</p>
                    <p>从没想过改变世界</p>
                </div>
                <img src="images/page2/tit.png" alt="" class="page2_main_tit">
                <img src="images/page2/arrow.png" alt="" class="page2_arrow">
            </div>
        </div>
        <div class="page page3">
            <button class="nextShow">333</button>
        </div>
        <div class="page page4">
            <div class="page4_main">
                <img src="images/page4/tit.png" alt="" class="page4_main_tit">
                <div class="page4_swp">
                    <img src="images/page4/swiper_bg.png" alt="" class="page4_swp_bg">
                    <div class="swiper-container">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">Slide 1</div>
                            <div class="swiper-slide">Slide 2</div>
                            <div class="swiper-slide">Slide 3</div>
                        </div>
                        <div class="swiper-pagination"></div>
                    </div>
                    <p class="sw_txt">向右滑动</p>
                    <p class="sw_txt sw_txt_intro">水之优雅</p>
                </div>
                <div class="btn_group">
                    <a href="javascript:;">
                        <img src="images/bot_btn_01.png" alt="" class="">
                    </a>
                    <a href="javascript:;" class="nextShow">
                        <img src="images/bot_btn_02.png" alt="" class="">
                    </a>
                </div>
            </div>
        </div>

        <div class="page page5">
            <div class="page5_main">
                <img src="images/page5/tit.png" alt="" class="auto_img">
                <div class="page5_cen">
                    <img src="images/page5/cent_q.png" alt="" class="">
                    <img src="images/page5/cent_mof.png" alt="" class="">
                </div>
                <img src="images/page5/txt.png" alt="" class="auto_img" style="padding-bottom: 2vw;">
                <div class="btn_group">
                    <a href="javascript:;" class="nextShow">
                        <img src="images/bot_btn_01.png" alt="" class="aimg">
                        <img src="images/bot_btn_01_act.png" alt="" class="bimg">
                    </a>
                    <a href="javascript:;" class="nextShow">
                        <img src="images/bot_btn_02_act.png" alt="" class="aimg">
                    </a>
                </div>
            </div>
        </div>
        <div class="page page6"></div>
        <div class="page page7"></div>
        <!-- <div class="share">
            <div class="cover"></div>
            <div class="con">
                <img src="images/share/arrow.png" alt="" class="auto_img">
                <a href="javascript:;">
                    <img src="images/share/btn.png" alt="" class="auto_img">
                </a>
            </div>
        </div> -->
        <a href="javascript:;" class="muc">
            <img src="images/muc.png" alt="">
        </a>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="js/swiper/js/swiper.min.js"></script>
    <script>
        var swiper = new Swiper('.swiper-container', {
            pagination: {
                el: '.swiper-pagination',
            },
        });

        //禁止下拉
        var overscroll = function (el) {
            el.addEventListener('touchstart', function () {
                var top = el.scrollTop
                    , totalScroll = el.scrollHeight
                    , currentScroll = top + el.offsetHeight
                //If we're at the top or the bottom of the containers
                //scroll, push up or down one pixel.
                //
                //this prevents the scroll from "passing through" to
                //the body.
                if (top === 0) {
                    el.scrollTop = 1
                } else if (currentScroll === totalScroll) {
                    el.scrollTop = top - 1
                }
            })
            el.addEventListener('touchmove', function (evt) {
                //if the content is actually scrollable, i.e. the content is long enough
                //that scrolling can occur
                if (el.offsetHeight < el.scrollHeight)
                    evt._isScroller = true
            })
        }
        overscroll(document.querySelector('.main'));
        document.body.addEventListener('touchmove', function (evt) {
            //In this case, the default behavior is scrolling the body, which
            //would result in an overflow.  Since we don't want that, we preventDefault.
            if (!evt._isScroller) {
                evt.preventDefault()
            }
        })


        $(function () {
            var img = $("img");//首先获取所有的Img对象
            var num = 0;//定义一个变量，赋值给b标签用
            img.each(function (i) {//遍历获取到的所有img
                var oImg = new Image();//new一个新对象
                oImg.onload = function () {//使用onload方法，在加载完成后执行
                    oImg.onload = null;//首先清除掉缓存
                    num++;//每次加载的过程中num++，即执行次数
                    $(".loading_box .txt").html(parseInt(num / $("img").length * 100) + "%");//改变b标签的内容，用num除以img的个数，再乘以100，再取整，这就是加载的百分数
                    if (num >= i) {
                        $(".page1").hide().next().show()//当num的值大于等于个数时隐藏
                    }
                }
                oImg.src = img[i].src;//预加载，先指定一个img.src，当onload成功以后可以将数据指定到某一个元素或者图片上，或者返回一个结果
            })
        })
        $(".nextShow").on('click', function () {
            $(this).parents(".page").hide().next().show()
            $(".muc").show()
        });
        $(".cover").on("click", function () {
            $(".share").hide()
        })
        var page_le = $(".page").length;
        var click_le = 1;
        // $(".page").on("click", function () {
        //     console.log(click_le)
        //     console.log(page_le)
        //     if (click_le == page_le) {
        //         return
        //     };
        //     click_le++;
        //     $(this).hide().next().show();
        // })
        $(".page1").on("click", function () {
            $(this).hide().next().show();
        })
        //滑动处理
        if ($('.page2').css('display')) {
            var startX, startY;
            document.addEventListener('touchstart', function (ev) {
                startX = ev.touches[0].pageX;
                startY = ev.touches[0].pageY;
            }, false);

            document.addEventListener('touchend', function (ev) {
                var endX, endY;
                endX = ev.changedTouches[0].pageX;
                endY = ev.changedTouches[0].pageY;
                var direction = GetSlideDirection(startX, startY, endX, endY);
                switch (direction) {
                    case 0:
                        // alert("无操作");
                        break;
                    case 1:
                        // 向上
                        // alert("up");
                        $(".page2").hide().next().show()
                        break;
                    case 2:
                        // 向下
                        // alert("down");
                        break;

                    default:
                }
            }, false);
        }

        function GetSlideDirection(startX, startY, endX, endY) {
            var dy = startY - endY;
            //var dx = endX - startX;
            var result = 0;
            if (dy > 0) {//向上滑动
                result = 1;
            } else if (dy < 0) {//向下滑动
                result = 2;
            }
            else {
                result = 0;
            }
            return result;
        }

        /*
    *坠落效果
    */
    // function Falling() {
    //   this.dict = ["从", "来", "没", "有", "想", "过"];
    //   this.canvas = $(".page2");
    //   this.step = 15;
    //   this.freq = 100;
    //   this.height = 500;
    //   this.width = 500;
    //   this.si = null;
    // }
    // Falling.prototype = {
    //   fallingAction: function (dom) {
    //     var self = this;
    //     var freqs = [10, 15, 20];//每次下落的距离
    //     var disS = [];//记录所有dom的当前距离
    //     var disPerFreqS = [];//每个dom的
    //     var targetDis = 500;
    //     var domCssTopS = [];//所有dom的top属性
    //     var successDom = [];//记录哪些dom已经结束运动
    //     var successCount = 0;//有多少个dom已经结束
    //     var total = dom.length;
    //     var freqMarkLength = freqs.length;
    //     for (var i = 0, j = dom.length; i < j; i++) {
    //       domCssTopS[i] = dom[i].position().top;
    //       disS[i] = 0;
    //       disPerFreqS[i] = freqs[parseInt(Math.random() * freqMarkLength)];
    //     }
    //     self.si = setInterval(function () {
    //       if (successCount >= total) {
    //         clearInterval(self.si);
    //       }
    //       for (var i = 0, j = dom.length; i < j; i++) {
    //         if (typeof (successDom[i]) != "undefined" && successDom[i] == "ok") {
    //           continue;
    //         }
    //         disS[i] += disPerFreqS[i];
    //         if (disS[i] >= targetDis) {
    //           dom[i].css("top", targetDis + domCssTopS[i]);
    //           successDom[i] = "ok";
    //           successCount++;;
    //         } else {
    //           dom[i].css("top", disS[i] + domCssTopS[i]);
    //         }
    //       }
    //     }, self.freq);
    //   },
    //   init: function () {
    //     var self = this;
    //     self.canvas.html('');
    //     var dom = [];
    //     var l = 0;
    //     var t = 0;
    //     var tempDom = $("<div style='position;absolute;left:-100000;visibility:hidden'></div>").appendTo($("body"));
    //     for (var i = 0, j = self.dict.length; i < j; i++) {
    //       dom[i] = $("<span style='position:absolute' class='txt'>" + self.dict[i] + "</span>").appendTo(tempDom);
    //       var domWidth = dom[i].width();
    //       var domHeight = dom[i].height();
    //       if (t < self.height) {
    //         if (l < self.width) {
    //           if (domWidth + l <= self.width) {
    //             dom[i].css({ "top": t, "left": l });
    //             self.canvas.append(dom[i]);
    //             l += dom[i].width();
    //           } else {
    //             if (domHeight + t <= self.height) {
    //               t = t + domHeight;
    //               dom[i].css({ "top": t, "left": 0 });
    //               self.canvas.append(dom[i]);
    //               l = dom[i].width();
    //             } else {
    //               break;//到极限了
    //             }
    //           }
    //         } else {
    //           if (domHeight + t <= self.height) {
    //             t = t + domHeight;
    //             l = 0;
    //             dom[i].css({ "top": t, "left": l });
    //             self.canvas.append(dom[i]);
    //           } else {
    //             break;//到极限了
    //           }
    //         }
    //       }//else极限
    //     }
    //     /*
    //     for(var i=0,l=self.dict.length;i<l;i++){
    //      self.fallingAction(dom[i]);
    //     }
    //     */
    //     self.fallingAction(dom);
    //   }
    // }
    // var falling = new Falling();
    // falling.init();
    </script>
</body>

</html>